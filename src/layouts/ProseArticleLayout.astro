---
import type { MarkdownHeading } from 'astro';
import BaseLayout from './BaseLayout.astro';
import TableOfContents from '../components/TableOfContents.astro';
import { cn } from '../lib/utils';

interface Props {
  pageTitle: string;
  ogimage?: string;
  description?: string;
  tocHeadings?: MarkdownHeading[];
}

const { pageTitle, ogimage, description, tocHeadings } = Astro.props;
---

<BaseLayout pageTitle={pageTitle} ogimage={ogimage} description={description}>
  <div
    class={cn(
      'mt-10 mb-16 w-full flex justify-center',
      'xl:grid xl:grid-cols-[minmax(1rem,1fr)_minmax(0,36ch)_auto_minmax(0,36ch)_minmax(1rem,1fr)]',
    )}
  >
    <article
      class={cn(
        'w-full mx-8 xl:col-start-3 xl:w-auto',
        'prose prose-neutral dark:prose-invert',
        'prose-headings:scroll-mt-24 sm:prose-headings:scroll-mt-28',
        'prose-h1:mb-10 prose-h1:mt-6 prose-h1:text-center prose-h1:text-3xl',
        'prose-h2:border-b prose-h2:border-b-neutral-300 prose-h2:pb-2 prose-h2:text-3xl',
        'prose-h3:border-b prose-h3:border-b-neutral-300 prose-h3:pb-2 prose-h3:text-2xl',
        'prose-h4:text-xl',
        'prose-h5:text-lg prose-h5:font-bold',
        'prose-h6:font-bold',
        'prose-img:rounded',
        'prose-code:font-normal',
        'wrap-break-word',
      )}
    >
      <slot />
    </article>
    {
      tocHeadings && (
        <TableOfContents
          headings={tocHeadings}
          options={{ enableIndicator: true }}
          class="sticky top-24 hidden xl:col-start-4 xl:block"
        />
      )
    }
  </div>
</BaseLayout>
